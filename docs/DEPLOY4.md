

# –ë—é–¥–∂–µ—Ç–Ω–∞ –≤–µ—Ä—Å—ñ—è Azure Infrastructure Script (~$20-25/–º—ñ—Å—è—Ü—å)

## üí∞ –ú–æ–¥–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –µ–∫–æ–Ω–æ–º–Ω–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è## üìã –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–±–æ—Ç–∏ –±—é–¥–∂–µ—Ç–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

### üîç **–§–∞–∑–∞ 1: –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏**

#### **–ö—Ä–æ–∫ 1-3: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞**
1. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö** - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –±—é–¥–∂–µ—Ç–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
2. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π** - Azure CLI, OpenSSL, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
3. **–õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ—á–∞—Ç–∫—É** - –≤–∏–≤—ñ–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Ç–∞ –æ—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ—ó –≤–∞—Ä—Ç–æ—Å—Ç—ñ

### üèóÔ∏è **–§–∞–∑–∞ 2: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–æ–≤–æ—ó —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏**

#### **–ö—Ä–æ–∫ 4-6: –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏**
4. **Resource Group** - –ª–æ–≥—ñ—á–Ω–µ –æ–±'—î–¥–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤
5. **Storage Account** - Standard_LRS –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó (~$2-5/–º—ñ—Å)
6. **Storage Containers** - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –¥–ª—è static/media —Ñ–∞–π–ª—ñ–≤

### üóÑÔ∏è **–§–∞–∑–∞ 3: –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —Ç–∞ –±–µ–∑–ø–µ–∫–∞**

#### **–ö—Ä–æ–∫ 7-9: Database —Ç–∞ Key Vault**
7. **PostgreSQL Flexible Server** - Standard_B1ms (1 vCore, 2GB RAM, ~$12-15/–º—ñ—Å)
8. **Database —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è** - –æ—Å–Ω–æ–≤–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—É
9. **Firewall rules** - –¥–æ–∑–≤—ñ–ª –¥–æ—Å—Ç—É–ø—É –∑ Azure —Å–µ—Ä–≤—ñ—Å—ñ–≤

#### **–ö—Ä–æ–∫ 10-11: –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏**
10. **Key Vault —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è** - –±–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤ (~$1/–º—ñ—Å)
11. **–î–æ–¥–∞–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤** - Django SECRET_KEY, DB password, Storage key

### üìä **–§–∞–∑–∞ 4: –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ —Ö–æ—Å—Ç–∏–Ω–≥**

#### **–ö—Ä–æ–∫ 12-13: Application Insights —Ç–∞ App Service**
12. **Application Insights** - –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ (–¥–æ 5GB/–º—ñ—Å)
13. **App Service Plan F1** - üÜì **–ë–ï–ó–ö–û–®–¢–û–í–ù–ò–ô** –ø–ª–∞–Ω –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏

#### **–ö—Ä–æ–∫ 14: Web App**
14. **Django Web App** - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –±–∞–∑–æ–≤–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### ‚öôÔ∏è **–§–∞–∑–∞ 5: –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**

#### **–ö—Ä–æ–∫ 15-17: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É**
15. **Environment Variables** - –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Key Vault —Ç–∞ —ñ–Ω—à–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
16. **Startup Configuration** - –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è 1 worker
17. **Logging Configuration** - –º—ñ–Ω—ñ–º–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó —Ä–µ—Å—É—Ä—Å—ñ–≤

#### **–ö—Ä–æ–∫ 18-19: –ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –¥–æ—Å—Ç—É–ø**
18. **Managed Identity** - –±–µ–∑–ø–µ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ Key Vault
19. **HTTPS enforcement** - –ø—Ä–∏–º—É—Å–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è HTTPS

### üìù **–§–∞–∑–∞ 6: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤**

#### **–ö—Ä–æ–∫ 20-24: –§–∞–π–ª–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó**
20. **requirements.txt** - –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –Ω–∞–±—ñ—Ä –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
21. **.env.budget** - –±—é–¥–∂–µ—Ç–Ω—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
22. **startup.sh** - –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π startup —Å–∫—Ä–∏–ø—Ç
23. **budget_settings.py** - Django settings –¥–ª—è –±—é–¥–∂–µ—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É
24. **cleanup script** - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

### üìä **–§–∞–∑–∞ 7: –ó–≤—ñ—Ç–Ω—ñ—Å—Ç—å —Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è**

#### **–ö—Ä–æ–∫ 25-27: –§—ñ–Ω–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç**
25. **–û—Ç—Ä–∏–º–∞–Ω–Ω—è URL** - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –¥–æ–¥–∞—Ç–æ–∫
26. **–ü—ñ–¥—Å—É–º–∫–æ–≤–∏–π –∑–≤—ñ—Ç** - –¥–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏
27. **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó** - —Ñ–∞–π–ª budget-infrastructure-summary.txt

---

## üîß **–î–µ—Ç–∞–ª—å–Ω–∏–π —Ä–æ–∑–±—ñ—Ä –∫–ª—é—á–æ–≤–∏—Ö –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ–π**

### üí∞ **–ë—é–¥–∂–µ—Ç–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è –≤ —Å–∫—Ä–∏–ø—Ç—ñ:**

#### **üÜì App Service F1 Plan**
```bash
APP_SERVICE_SKU="F1"              # –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ
# –û–±–º–µ–∂–µ–Ω–Ω—è:
# - 60 —Ö–≤–∏–ª–∏–Ω CPU –Ω–∞ –¥–µ–Ω—å
# - 1GB RAM
# - –ë–µ–∑ Always On (cold start)
# - –ú–∞–∫—Å–∏–º—É–º 10 –¥–æ–¥–∞—Ç–∫—ñ–≤
```

#### **üíµ PostgreSQL B1ms**
```bash
DB_SKU="Standard_B1ms"            # $12-15/–º—ñ—Å—è—Ü—å
DB_STORAGE_SIZE="32"              # –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä
# –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:
# - 1 vCore, 2GB RAM
# - 32GB SSD storage
# - –ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –º–∞–ª–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤
```

#### **üíæ –ï–∫–æ–Ω–æ–º–Ω–µ —Å—Ö–æ–≤–∏—â–µ**
```bash
STORAGE_SKU="Standard_LRS"        # –õ–æ–∫–∞–ª—å–Ω–æ –Ω–∞–¥–ª–∏—à–∫–æ–≤–µ
# –ü–µ—Ä–µ–≤–∞–≥–∏:
# - –ù–∞–π–¥–µ—à–µ–≤—à–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç
# - –î–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏/—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
# - $0.0184/GB/–º—ñ—Å—è—Ü—å
```

---

## ‚ö†Ô∏è **–û–±–º–µ–∂–µ–Ω–Ω—è –±—é–¥–∂–µ—Ç–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó**

### **F1 App Service –æ–±–º–µ–∂–µ–Ω–Ω—è:**
- **CPU –∫–≤–æ—Ç–∞**: 60 —Ö–≤–∏–ª–∏–Ω –Ω–∞ –¥–µ–Ω—å
- **RAM**: 1GB (—Å–ø—ñ–ª—å–Ω–æ –¥–ª—è –≤—Å—ñ—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤)
- **Bandwidth**: 165MB –Ω–∞ –¥–µ–Ω—å
- **–ë–µ–∑ Always On**: –º–æ–∂–ª–∏–≤—ñ cold starts
- **–ë–µ–∑ custom domains**: —Ç—ñ–ª—å–∫–∏ *.azurewebsites.net
- **–ë–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è**

### **B1ms Database –æ–±–º–µ–∂–µ–Ω–Ω—è:**
- **Performance**: –±–∞–∑–æ–≤–∏–π —Ä—ñ–≤–µ–Ω—å
- **Connections**: –æ–±–º–µ–∂–µ–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–¥–Ω–æ—á–∞—Å–Ω–∏—Ö –∑'—î–¥–Ω–∞–Ω—å
- **IOPS**: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Ä—ñ–≤–µ–Ω—å
- **Backup retention**: 7 –¥–Ω—ñ–≤

---

## üöÄ **–°—Ç—Ä–∞—Ç–µ–≥—ñ—è –∞–ø–≥—Ä–µ–π–¥—É**

### **–ü–æ–µ—Ç–∞–ø–Ω–µ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤:**

#### **–ï—Ç–∞–ø 1: –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è App Service ($13/–º—ñ—Å –¥–æ–¥–∞—Ç–∫–æ–≤–æ)**
```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ B1
az appservice plan update \
    --name "django-app-budget-plan" \
    --resource-group "django-app-budget-rg" \
    --sku B1
```

#### **–ï—Ç–∞–ø 2: –ó–±—ñ–ª—å—à–µ–Ω–Ω—è DB –ø–æ—Ç—É–∂–Ω–æ—Å—Ç—ñ ($15-20/–º—ñ—Å –¥–æ–¥–∞—Ç–∫–æ–≤–æ)**
```bash
# –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ B2s
az postgres flexible-server update \
    --name "your-db-server" \
    --resource-group "django-app-budget-rg" \
    --sku-name Standard_B2s
```

#### **–ï—Ç–∞–ø 3: –î–æ–¥–∞–≤–∞–Ω–Ω—è Redis –∫–µ—à—É ($10-15/–º—ñ—Å)**
```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Azure Cache for Redis
az redis create \
    --name "django-cache" \
    --resource-group "django-app-budget-rg" \
    --sku Basic \
    --vm-size C0
```

---

## üìà **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –≤–∏—Ç—Ä–∞—Ç**

### **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è billing alerts:**
```bash
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è budget alert
az consumption budget create \
    --resource-group "django-app-budget-rg" \
    --budget-name "django-monthly-budget" \
    --amount 30 \
    --category Cost \
    --time-grain Monthly
```

### **–ö–ª—é—á–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è:**
- **App Service CPU usage** - –Ω–µ –ø–µ—Ä–µ–≤–∏—â—É–≤–∞—Ç–∏ 60 —Ö–≤/–¥–µ–Ω—å
- **Database DTU consumption** - –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- **Storage operations** - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ–π —á–∏—Ç–∞–Ω–Ω—è/–∑–∞–ø–∏—Å—É
- **Bandwidth usage** - –≤–∏—Ö—ñ–¥–Ω–∏–π —Ç—Ä–∞—Ñ—ñ–∫

---

## üõ†Ô∏è **–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø–æ—Ä–∞–¥–∏ –ø–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó**

### **–ö–æ–¥-—Ä—ñ–≤–µ–Ω—å –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:**

#### **Django settings –¥–ª—è –±—é–¥–∂–µ—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É:**
```python
# –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–µ –∫–µ—à—É–≤–∞–Ω–Ω—è
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
        'OPTIONS': {'MAX_ENTRIES': 300}
    }
}

# –ü–µ—Ä–µ—ñ—Å–ø–æ–ª—å–∑—É–≤–∞–Ω–Ω—è DB –∑'—î–¥–Ω–∞–Ω—å
DATABASES = {
    'default': {
        'CONN_MAX_AGE': 600,  # 10 —Ö–≤–∏–ª–∏–Ω
        'OPTIONS': {'MAX_CONNS': 2}  # –ú—ñ–Ω—ñ–º—É–º –¥–ª—è B1ms
    }
}

# –°—Ç–∞—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ WhiteNoise (–µ–∫–æ–Ω–æ–º—ñ—è –Ω–∞ Storage)
MIDDLEWARE = [
    'whitenoise.middleware.WhiteNoiseMiddleware',
    # ... —ñ–Ω—à—ñ middleware
]
```

#### **Gunicorn –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è:**
```bash
# –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è F1
gunicorn --bind=0.0.0.0:8000 \
         --timeout 300 \
         --workers 1 \
         --max-requests 1000 \
         --max-requests-jitter 100 \
         config.wsgi:application
```

---

## üìã **Checklist –¥–ª—è –±—é–¥–∂–µ—Ç–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é**

### **‚úÖ –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:**
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Azure CLI –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é
- [ ] –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∫–≤–æ—Ç–∏ –ø—ñ–¥–ø–∏—Å–∫–∏
- [ ] –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –æ—Ä—ñ—î–Ω—Ç–æ–≤–Ω—É –≤–∞—Ä—Ç—ñ—Å—Ç—å
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ billing alerts

### **‚úÖ –ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é:**
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –¥–æ–¥–∞—Ç–∫—É
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ CPU usage
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ backup —Å—Ç—Ä–∞—Ç–µ–≥—ñ—é
- [ ] –î–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏ credentials

### **‚úÖ –ü–æ—Å—Ç—ñ–π–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:**
- [ ] –©–æ–¥–µ–Ω–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ CPU –∫–≤–æ—Ç–∏ F1
- [ ] –¢–∏–∂–Ω–µ–≤–∏–π –∞–Ω–∞–ª—ñ–∑ –≤–∏—Ç—Ä–∞—Ç
- [ ] –ú—ñ—Å—è—á–Ω–∏–π review performance –º–µ—Ç—Ä–∏–∫
- [ ] –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è –∞–ø–≥—Ä–µ–π–¥—ñ–≤ –ø—Ä–∏ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—ñ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

---

## üéØ **–í–∏–ø–∞–¥–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±—é–¥–∂–µ—Ç–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó**

### **‚úÖ –Ü–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è:**
- **MVP —Ç–∞ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏** - —à–≤–∏–¥–∫–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —ñ–¥–µ–π
- **–ù–∞–≤—á–∞–ª—å–Ω—ñ –ø—Ä–æ–µ–∫—Ç–∏** - –≤–∏–≤—á–µ–Ω–Ω—è Django + Azure
- **–û—Å–æ–±–∏—Å—Ç—ñ –±–ª–æ–≥–∏/–ø–æ—Ä—Ç—Ñ–æ–ª—ñ–æ** - –Ω–µ–≤–µ–ª–∏–∫–∏–π —Ç—Ä–∞—Ñ—ñ–∫
- **Dev/Staging —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞** - —Ä–æ–∑—Ä–æ–±–∫–∞ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- **–î–µ–º–æ –¥–æ–¥–∞—Ç–∫–∏** - –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—ó —Ç–∞ POC

### **‚ùå –ù–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è:**
- **Production –∑ –≤–∏—Å–æ–∫–∏–º —Ç—Ä–∞—Ñ—ñ–∫–æ–º** - –æ–±–º–µ–∂–µ–Ω–Ω—è F1
- **CPU-—ñ–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ñ –∑–∞–¥–∞—á—ñ** - –ª—ñ–º—ñ—Ç 60 —Ö–≤/–¥–µ–Ω—å
- **–í–∏—Å–æ–∫–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ë–î** - B1ms –º–∞—î –æ–±–º–µ–∂–µ–Ω–Ω—è
- **24/7 –∫—Ä–∏—Ç–∏—á–Ω—ñ —Å–∏—Å—Ç–µ–º–∏** - –Ω–µ–º–∞—î Always On
- **–í–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏/–º–µ–¥—ñ–∞** - –æ–±–º–µ–∂–µ–Ω–Ω—è bandwidth

---

## üí° **–ü–æ—Ä–∞–¥–∏ –ø–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—é**

### **–°–∏–≥–Ω–∞–ª–∏ –¥–ª—è –∞–ø–≥—Ä–µ–π–¥—É:**
1. **CPU quota exhausted** - —á–∞—Å—Ç–æ–µ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –ª—ñ–º—ñ—Ç—É 60 —Ö–≤
2. **Cold starts** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Å–∫–∞—Ä–∂–∞—Ç—å—Å—è –Ω–∞ –ø–æ–≤—ñ–ª—å–Ω–∏–π –≤—ñ–¥–≥—É–∫
3. **DB timeouts** - –ø–æ–º–∏–ª–∫–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏
4. **Storage costs** - –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π –∑ —Ñ–∞–π–ª–∞–º–∏

### **–ü–æ–µ—Ç–∞–ø–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è —Ä–æ—Å—Ç—É:**
```
Budget ($20-25) ‚Üí Basic ($40-50) ‚Üí Standard ($80-120) ‚Üí Premium ($200+)
     ‚Üì               ‚Üì                ‚Üì                    ‚Üì
   F1+B1ms        B1+B2s           S1+GP2s            P1V2+GP4s
```

–¶—è –±—é–¥–∂–µ—Ç–Ω–∞ –≤–µ—Ä—Å—ñ—è –¥–∞—î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ä–æ–∑–ø–æ—á–∞—Ç–∏ –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º–∏ –≤–∏—Ç—Ä–∞—Ç–∞–º–∏ —Ç–∞ –ø–æ—Å—Ç—É–ø–æ–≤–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞—Ç–∏—Å—è –≤ –º—ñ—Ä—É –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –ø–æ—Ç—Ä–µ–±! üöÄüí∞




```bash
#!/bin/bash
# =============================================================================
# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ë–Æ–î–ñ–ï–¢–ù–û–á —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ Azure –¥–ª—è Django –¥–æ–¥–∞—Ç–∫—É
# –í–∞—Ä—Ç—ñ—Å—Ç—å: ~$20-25/–º—ñ—Å—è—Ü—å
# =============================================================================

set -e  # –ó—É–ø–∏–Ω–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ

# –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è –≤–∏–≤–æ–¥—É
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
CYAN='\033[0;36m'
NC='\033[0m' # No Color

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
log() {
    echo -e "${GREEN}[$(date +'%Y-%m-%d %H:%M:%S')]${NC} $1"
}

error() {
    echo -e "${RED}[ERROR]${NC} $1"
    exit 1
}

warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

info() {
    echo -e "${CYAN}[INFO]${NC} $1"
}

# =============================================================================
# –ë–Æ–î–ñ–ï–¢–ù–ê –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø - –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –î–õ–Ø –ú–Ü–ù–Ü–ú–ê–õ–¨–ù–ò–• –í–ò–¢–†–ê–¢
# =============================================================================

# –û—Å–Ω–æ–≤–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
PROJECT_NAME="django-app"
ENVIRONMENT="budget"              # budget, dev, staging, production
LOCATION="West Europe"
TIMESTAMP=$(date +%s)

# –Ü–º–µ–Ω–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤
RESOURCE_GROUP_NAME="${PROJECT_NAME}-${ENVIRONMENT}-rg"
APP_SERVICE_PLAN_NAME="${PROJECT_NAME}-${ENVIRONMENT}-plan"
WEB_APP_NAME="${PROJECT_NAME}-${ENVIRONMENT}-${TIMESTAMP}"
DATABASE_SERVER_NAME="${PROJECT_NAME}-${ENVIRONMENT}-db-${TIMESTAMP}"
DATABASE_NAME="${PROJECT_NAME}_db"
STORAGE_ACCOUNT_NAME="djapp$(date +%s | tail -c 8)"
KEY_VAULT_NAME="djapp-kv-$(date +%s | tail -c 6)"
APP_INSIGHTS_NAME="${PROJECT_NAME}-${ENVIRONMENT}-insights"

# üí∞ –ë–Æ–î–ñ–ï–¢–ù–ê –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø
APP_SERVICE_SKU="F1"              # üÜì –ë–ï–ó–ö–û–®–¢–û–í–ù–û (–∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏)
PYTHON_VERSION="3.11"
DB_SKU="Standard_B1ms"            # üíµ $12-15/–º—ñ—Å—è—Ü—å (1 vCore, 2GB RAM)
DB_STORAGE_SIZE="32"              # –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä
STORAGE_SKU="Standard_LRS"        # –ù–∞–π–¥–µ—à–µ–≤—à–∏–π —Ç–∏–ø —Å—Ö–æ–≤–∏—â–∞

# –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
DB_ADMIN_USER="djangoadmin"
DB_ADMIN_PASSWORD="$(openssl rand -base64 32 | tr -d '=/+' | cut -c1-16)Aa1!"

# –¢–µ–≥–∏ –¥–ª—è —Ä–µ—Å—É—Ä—Å—ñ–≤
TAGS="Environment=${ENVIRONMENT} Project=${PROJECT_NAME} CreatedBy=AzureCLI CostProfile=Budget"

echo ""
echo -e "${BLUE}============================================${NC}"
echo -e "${BLUE}üí∞ –ë–Æ–î–ñ–ï–¢–ù–ê AZURE INFRASTRUCTURE${NC}"
echo -e "${BLUE}============================================${NC}"
echo -e "${CYAN}–û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: $20-25/–º—ñ—Å—è—Ü—å${NC}"
echo ""
echo "üìä –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:"
echo "  üöÄ App Service: F1 (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ)"
echo "  üóÑÔ∏è  Database: Standard_B1ms (~$12-15)"
echo "  üíæ Storage: Standard_LRS (~$2-5)"
echo "  üîê Key Vault: ~$1"
echo "  üìà App Insights: –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ (–¥–æ 5GB)"
echo ""

log "–ü–æ—á–∞—Ç–æ–∫ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ë–Æ–î–ñ–ï–¢–ù–û–á —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–ª—è Django –¥–æ–¥–∞—Ç–∫—É..."
log "–ü—Ä–æ–µ–∫—Ç: ${PROJECT_NAME}"
log "–°–µ—Ä–µ–¥–æ–≤–∏—â–µ: ${ENVIRONMENT}"
log "–†–µ–≥—ñ–æ–Ω: ${LOCATION}"

# =============================================================================
# –ü–ï–†–ï–í–Ü–†–ö–ê –ó–ê–õ–ï–ñ–ù–û–°–¢–ï–ô
# =============================================================================

log "–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π..."

if ! command -v az &> /dev/null; then
    error "Azure CLI –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –π–æ–≥–æ –∑ https://docs.microsoft.com/en-us/cli/azure/install-azure-cli"
fi

if ! az account show &> /dev/null; then
    error "–í–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ –≤ Azure CLI. –í–∏–∫–æ–Ω–∞–π—Ç–µ 'az login'"
fi

if ! command -v openssl &> /dev/null; then
    error "OpenSSL –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ"
fi

log "‚úÖ –í—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ"

# =============================================================================
# –ü–û–ö–†–û–ö–û–í–ò–ô –ê–õ–ì–û–†–ò–¢–ú –°–¢–í–û–†–ï–ù–ù–Ø –†–ï–°–£–†–°–Ü–í
# =============================================================================

info "üîÑ –ö–†–û–ö 1/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Resource Group"
log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Resource Group: ${RESOURCE_GROUP_NAME}"
az group create \
    --name "$RESOURCE_GROUP_NAME" \
    --location "$LOCATION" \
    --tags $TAGS

info "üîÑ –ö–†–û–ö 2/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Storage Account (–±—é–¥–∂–µ—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)"
log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Storage Account: ${STORAGE_ACCOUNT_NAME}"
az storage account create \
    --name "$STORAGE_ACCOUNT_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --location "$LOCATION" \
    --sku "$STORAGE_SKU" \
    --kind StorageV2 \
    --access-tier Hot \
    --tags $TAGS

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ —Ç–∞ –º–µ–¥—ñ–∞
log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤"
STORAGE_KEY=$(az storage account keys list \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --account-name "$STORAGE_ACCOUNT_NAME" \
    --query '[0].value' \
    --output tsv)

az storage container create \
    --name "static" \
    --account-name "$STORAGE_ACCOUNT_NAME" \
    --account-key "$STORAGE_KEY" \
    --public-access blob

az storage container create \
    --name "media" \
    --account-name "$STORAGE_ACCOUNT_NAME" \
    --account-key "$STORAGE_KEY" \
    --public-access blob

info "üîÑ –ö–†–û–ö 3/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è PostgreSQL Database (–±—é–¥–∂–µ—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)"
log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è PostgreSQL —Å–µ—Ä–≤–µ—Ä–∞: ${DATABASE_SERVER_NAME}"
warning "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –Ω–∞–π–¥–µ—à–µ–≤—à–∏–π SKU: $DB_SKU"
az postgres flexible-server create \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --name "$DATABASE_SERVER_NAME" \
    --location "$LOCATION" \
    --admin-user "$DB_ADMIN_USER" \
    --admin-password "$DB_ADMIN_PASSWORD" \
    --sku-name "$DB_SKU" \
    --storage-size "$DB_STORAGE_SIZE" \
    --version 14 \
    --public-access 0.0.0.0 \
    --tags $TAGS

info "üîÑ –ö–†–û–ö 4/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö"
log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö: ${DATABASE_NAME}"
az postgres flexible-server db create \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --server-name "$DATABASE_SERVER_NAME" \
    --database-name "$DATABASE_NAME"

info "üîÑ –ö–†–û–ö 5/11: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è firewall –ø—Ä–∞–≤–∏–ª"
log "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è firewall –ø—Ä–∞–≤–∏–ª –¥–ª—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö"
az postgres flexible-server firewall-rule create \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --name "$DATABASE_SERVER_NAME" \
    --rule-name "AllowAzureServices" \
    --start-ip-address 0.0.0.0 \
    --end-ip-address 0.0.0.0

info "üîÑ –ö–†–û–ö 6/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Key Vault"
log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Key Vault: ${KEY_VAULT_NAME}"
az keyvault create \
    --name "$KEY_VAULT_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --location "$LOCATION" \
    --enable-rbac-authorization false \
    --tags $TAGS

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ Key Vault
log "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É –¥–æ Key Vault"
az keyvault set-policy \
    --name "$KEY_VAULT_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --object-id "$(az ad signed-in-user show --query id --output tsv)" \
    --secret-permissions get list set delete

info "üîÑ –ö–†–û–ö 7/11: –î–æ–¥–∞–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤ –¥–æ Key Vault"
log "–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤"
DJANGO_SECRET_KEY=$(openssl rand -base64 50 | tr -d '=/+')

# –î–æ–¥–∞–≤–∞–Ω–Ω—è —Å–µ–∫—Ä–µ—Ç—ñ–≤ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –ø–æ–º–∏–ª–æ–∫
if az keyvault secret set \
    --vault-name "$KEY_VAULT_NAME" \
    --name "django-secret-key" \
    --value "$DJANGO_SECRET_KEY" >/dev/null 2>&1; then
    log "‚úÖ Django secret key –¥–æ–¥–∞–Ω–æ"
else
    warning "‚ùå –ü–æ–º–∏–ª–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è Django secret key"
fi

if az keyvault secret set \
    --vault-name "$KEY_VAULT_NAME" \
    --name "database-password" \
    --value "$DB_ADMIN_PASSWORD" >/dev/null 2>&1; then
    log "‚úÖ Database password –¥–æ–¥–∞–Ω–æ"
else
    warning "‚ùå –ü–æ–º–∏–ª–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è database password"
fi

if az keyvault secret set \
    --vault-name "$KEY_VAULT_NAME" \
    --name "storage-account-key" \
    --value "$STORAGE_KEY" >/dev/null 2>&1; then
    log "‚úÖ Storage account key –¥–æ–¥–∞–Ω–æ"
else
    warning "‚ùå –ü–æ–º–∏–ª–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è storage account key"
fi

info "üîÑ –ö–†–û–ö 8/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Application Insights"
log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Application Insights: ${APP_INSIGHTS_NAME}"
az monitor app-insights component create \
    --app "$APP_INSIGHTS_NAME" \
    --location "$LOCATION" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --tags $TAGS

# –û—Ç—Ä–∏–º–∞–Ω–Ω—è Instrumentation Key
INSTRUMENTATION_KEY=$(az monitor app-insights component show \
    --app "$APP_INSIGHTS_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --query "instrumentationKey" \
    --output tsv)

info "üîÑ –ö–†–û–ö 9/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è App Service Plan (–ë–ï–ó–ö–û–®–¢–û–í–ù–ò–ô F1)"
log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è App Service Plan: ${APP_SERVICE_PLAN_NAME}"
warning "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø–ª–∞–Ω F1 –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏!"
az appservice plan create \
    --name "$APP_SERVICE_PLAN_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --location "$LOCATION" \
    --sku "$APP_SERVICE_SKU" \
    --is-linux \
    --tags $TAGS

info "üîÑ –ö–†–û–ö 10/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Web App"
log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è Web App: ${WEB_APP_NAME}"
az webapp create \
    --name "$WEB_APP_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --plan "$APP_SERVICE_PLAN_NAME" \
    --runtime "PYTHON:${PYTHON_VERSION}" \
    --tags $TAGS

info "üîÑ –ö–†–û–ö 11/11: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É"
log "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞"
DATABASE_URL="postgresql://${DB_ADMIN_USER}:${DB_ADMIN_PASSWORD}@${DATABASE_SERVER_NAME}.postgres.database.azure.com:5432/${DATABASE_NAME}?sslmode=require"

az webapp config appsettings set \
    --name "$WEB_APP_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --settings \
        DJANGO_SETTINGS_MODULE="config.settings.budget" \
        SECRET_KEY="@Microsoft.KeyVault(VaultName=${KEY_VAULT_NAME};SecretName=django-secret-key)" \
        DATABASE_URL="$DATABASE_URL" \
        AZURE_STORAGE_ACCOUNT_NAME="$STORAGE_ACCOUNT_NAME" \
        AZURE_STORAGE_ACCOUNT_KEY="@Microsoft.KeyVault(VaultName=${KEY_VAULT_NAME};SecretName=storage-account-key)" \
        AZURE_STORAGE_CONTAINER_STATIC="static" \
        AZURE_STORAGE_CONTAINER_MEDIA="media" \
        APPINSIGHTS_INSTRUMENTATIONKEY="$INSTRUMENTATION_KEY" \
        APPLICATIONINSIGHTS_CONNECTION_STRING="InstrumentationKey=${INSTRUMENTATION_KEY}" \
        DEBUG="False" \
        ALLOWED_HOSTS="${WEB_APP_NAME}.azurewebsites.net" \
        DJANGO_LOG_LEVEL="WARNING" \
        PYTHONPATH="/home/site/wwwroot"

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è startup –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –±—é–¥–∂–µ—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É
log "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—é–¥–∂–µ—Ç–Ω–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó App Service"
az webapp config set \
    --name "$WEB_APP_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --startup-file "gunicorn --bind=0.0.0.0 --timeout 300 --workers 1 config.wsgi"

# –û–±–º–µ–∂–µ–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó —Ä–µ—Å—É—Ä—Å—ñ–≤
az webapp log config \
    --name "$WEB_APP_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --application-logging filesystem \
    --level warning \
    --detailed-error-messages false \
    --failed-request-tracing false \
    --web-server-logging off

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è managed identity
log "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Managed Identity"
az webapp identity assign \
    --name "$WEB_APP_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME"

# –û—Ç—Ä–∏–º–∞–Ω–Ω—è Principal ID —Ç–∞ –Ω–∞–¥–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ Key Vault
PRINCIPAL_ID=$(az webapp identity show \
    --name "$WEB_APP_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --query "principalId" \
    --output tsv)

az keyvault set-policy \
    --name "$KEY_VAULT_NAME" \
    --object-id "$PRINCIPAL_ID" \
    --secret-permissions get list

# –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è HTTPS
log "–£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è HTTPS"
az webapp update \
    --name "$WEB_APP_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --https-only true

# =============================================================================
# –°–¢–í–û–†–ï–ù–ù–Ø –ë–Æ–î–ñ–ï–¢–ù–ò–• –§–ê–ô–õ–Ü–í –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–á
# =============================================================================

log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±—é–¥–∂–µ—Ç–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó"

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ requirements.txt –¥–ª—è –±—é–¥–∂–µ—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É
cat > requirements.txt << 'EOF'
# –ë–Æ–î–ñ–ï–¢–ù–ê –í–ï–†–°–Ü–Ø - –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
Django>=4.2,<5.0
psycopg2-binary>=2.9.0
gunicorn>=20.1.0
django-storages[azure]>=1.13.0
python-decouple>=3.6
whitenoise>=6.0.0
EOF

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è .env.example –¥–ª—è –±—é–¥–∂–µ—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É
cat > .env.budget << EOF
# –ë–Æ–î–ñ–ï–¢–ù–ê –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø DJANGO
SECRET_KEY=your-secret-key-here
DEBUG=False
ALLOWED_HOSTS=${WEB_APP_NAME}.azurewebsites.net

# Database (–±—é–¥–∂–µ—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
DATABASE_URL=postgresql://user:password@host:port/database

# Azure Storage (–±—é–¥–∂–µ—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
AZURE_STORAGE_ACCOUNT_NAME=${STORAGE_ACCOUNT_NAME}
AZURE_STORAGE_ACCOUNT_KEY=your-storage-key
AZURE_STORAGE_CONTAINER_STATIC=static
AZURE_STORAGE_CONTAINER_MEDIA=media

# Application Insights (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞ –≤–µ—Ä—Å—ñ—è)
APPINSIGHTS_INSTRUMENTATIONKEY=${INSTRUMENTATION_KEY}

# –ë—é–¥–∂–µ—Ç–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
DJANGO_LOG_LEVEL=WARNING
WORKERS=1
TIMEOUT=300
EOF

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±—é–¥–∂–µ—Ç–Ω–æ–≥–æ startup.sh
cat > startup.sh << 'EOF'
#!/bin/bash
# –ë–Æ–î–ñ–ï–¢–ù–ò–ô STARTUP –°–ö–†–ò–ü–¢

echo "Starting Django application in BUDGET mode..."

# –®–≤–∏–¥–∫–µ –∑–±–∏—Ä–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
python manage.py collectstatic --noinput --clear

# –ó–∞–ø—É—Å–∫ –º—ñ–≥—Ä–∞—Ü—ñ–π
python manage.py migrate --noinput

# –ë—é–¥–∂–µ—Ç–Ω–∏–π –∑–∞–ø—É—Å–∫ –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏
exec gunicorn --bind=0.0.0.0:8000 --timeout 300 --workers 1 --max-requests 1000 --max-requests-jitter 100 config.wsgi:application
EOF

chmod +x startup.sh

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –±—é–¥–∂–µ—Ç–Ω–∏—Ö Django settings
cat > budget_settings.py << 'EOF'
"""
–ë–Æ–î–ñ–ï–¢–ù–Ü –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø DJANGO
–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç –Ω–∞ Azure F1 + B1ms
"""

from decouple import config
import os

# –ë–ê–ó–û–í–Ü –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø
DEBUG = config('DEBUG', default=False, cast=bool)
SECRET_KEY = config('SECRET_KEY')
ALLOWED_HOSTS = config('ALLOWED_HOSTS', default='').split(',')

# –ë–Æ–î–ñ–ï–¢–ù–ê –ë–ê–ó–ê –î–ê–ù–ò–•
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': config('DATABASE_URL'),
        'CONN_MAX_AGE': 600,  # –ü–µ—Ä–µ—ñ—Å–ø–æ–ª—å–∑—É–≤–∞–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω—å
        'OPTIONS': {
            'MAX_CONNS': 2,   # –ú—ñ–Ω—ñ–º—É–º –∑'—î–¥–Ω–∞–Ω—å –¥–ª—è B1ms
        }
    }
}

# –ë–Æ–î–ñ–ï–¢–ù–Ü –ú–ï–î–Ü–ê –§–ê–ô–õ–ò
DEFAULT_FILE_STORAGE = 'storages.backends.azure_storage.AzureStorage'
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.StaticFilesStorage'

# Azure Storage (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –º–µ–¥—ñ–∞, —Å—Ç–∞—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ whitenoise)
AZURE_ACCOUNT_NAME = config('AZURE_STORAGE_ACCOUNT_NAME')
AZURE_ACCOUNT_KEY = config('AZURE_STORAGE_ACCOUNT_KEY')
AZURE_CONTAINER = config('AZURE_STORAGE_CONTAINER_MEDIA')

# Whitenoise –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ (–µ–∫–æ–Ω–æ–º—ñ—è –Ω–∞ Storage –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö)
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'whitenoise.middleware.WhiteNoiseMiddleware',  # –ë—é–¥–∂–µ—Ç–Ω–∞ —Å—Ç–∞—Ç–∏–∫–∞
    # ... —ñ–Ω—à—ñ middleware
]

STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'

# –ë–Æ–î–ñ–ï–¢–ù–ï –ö–ï–®–£–í–ê–ù–ù–Ø (–±–µ–∑ Redis - –µ–∫–æ–Ω–æ–º—ñ—è –∫–æ—à—Ç—ñ–≤)
CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.locmem.LocMemCache',
        'LOCATION': 'budget-cache',
        'OPTIONS': {
            'MAX_ENTRIES': 300,  # –û–±–º–µ–∂–µ–Ω–∏–π –∫–µ—à
        }
    }
}

# –ú–Ü–ù–Ü–ú–ê–õ–¨–ù–ï –õ–û–ì–£–í–ê–ù–ù–Ø
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'console': {
            'class': 'logging.StreamHandler',
            'level': 'WARNING',  # –¢—ñ–ª—å–∫–∏ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è —Ç–∞ –ø–æ–º–∏–ª–∫–∏
        },
    },
    'root': {
        'handlers': ['console'],
        'level': 'WARNING',
    },
}

# –ë–Æ–î–ñ–ï–¢–ù–Ü –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –ü–†–û–î–£–ö–¢–ò–í–ù–û–°–¢–Ü
SESSION_ENGINE = 'django.contrib.sessions.backends.cached_db'
SESSION_CACHE_ALIAS = 'default'
SESSION_COOKIE_AGE = 1209600  # 2 —Ç–∏–∂–Ω—ñ

# –í–∏–º–∫–Ω–µ–Ω–Ω—è DEBUG toolbar —Ç–∞ —ñ–Ω—à–∏—Ö dev —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –≤ budget —Ä–µ–∂–∏–º—ñ
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –Ω–∞–±—ñ—Ä –¥–ª—è –±—é–¥–∂–µ—Ç–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É
]
EOF

# =============================================================================
# –°–¢–í–û–†–ï–ù–ù–Ø CLEANUP –°–ö–†–ò–ü–¢–£
# =============================================================================

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è cleanup —Å–∫—Ä–∏–ø—Ç—É
cat > cleanup_budget_infrastructure.sh << 'EOF'
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –≤–∏–¥–∞–ª–µ–Ω–Ω—è –±—é–¥–∂–µ—Ç–Ω–æ—ó —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

RESOURCE_GROUP_NAME="$RESOURCE_GROUP_NAME"

echo "üóëÔ∏è  –í–∏–¥–∞–ª–µ–Ω–Ω—è –±—é–¥–∂–µ—Ç–Ω–æ—ó —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏..."
echo "Resource Group: $RESOURCE_GROUP_NAME"

read -p "–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –≤–∏–¥–∞–ª–µ–Ω–Ω—è (yes/no): " confirmation
if [[ "$confirmation" == "yes" ]]; then
    az group delete --name "$RESOURCE_GROUP_NAME" --yes --no-wait
    echo "‚úÖ –ë—é–¥–∂–µ—Ç–Ω–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–º—ñ—á–µ–Ω–∞ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è"
else
    echo "‚ùå –û–ø–µ—Ä–∞—Ü—ñ—è —Å–∫–∞—Å–æ–≤–∞–Ω–∞"
fi
EOF

chmod +x cleanup_budget_infrastructure.sh

# =============================================================================
# –ü–Ü–î–°–£–ú–û–ö –ë–Æ–î–ñ–ï–¢–ù–û–ì–û –†–û–ó–ì–û–†–¢–ê–ù–ù–Ø
# =============================================================================

# –û—Ç—Ä–∏–º–∞–Ω–Ω—è URL –¥–æ–¥–∞—Ç–∫—É
APP_URL=$(az webapp show \
    --name "$WEB_APP_NAME" \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --query "defaultHostName" \
    --output tsv)

log "‚úÖ –ë–Æ–î–ñ–ï–¢–ù–ê —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–∞!"

echo ""
echo -e "${GREEN}============================================${NC}"
echo -e "${GREEN}üí∞ –ë–Æ–î–ñ–ï–¢–ù–ï –†–û–ó–ì–û–†–¢–ê–ù–ù–Ø –ó–ê–í–ï–†–®–ï–ù–û!${NC}"
echo -e "${GREEN}============================================${NC}"
echo ""
echo -e "${CYAN}üíµ –û–†–Ü–Ñ–ù–¢–û–í–ù–ê –í–ê–†–¢–Ü–°–¢–¨: $20-25/–º—ñ—Å—è—Ü—å${NC}"
echo ""
echo "üìã –°–¢–í–û–†–ï–ù–Ü –†–ï–°–£–†–°–ò:"
echo "üåç Resource Group: $RESOURCE_GROUP_NAME"
echo "üöÄ Web App: $WEB_APP_NAME (F1 - –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ)"
echo "üîó URL: https://$APP_URL"
echo "üìä App Service Plan: $APP_SERVICE_PLAN_NAME (F1)"
echo "üóÑÔ∏è  PostgreSQL Server: $DATABASE_SERVER_NAME (B1ms - ~$12-15)"
echo "üóÉÔ∏è  Database: $DATABASE_NAME"
echo "üíæ Storage Account: $STORAGE_ACCOUNT_NAME (LRS - ~$2-5)"
echo "üîê Key Vault: $KEY_VAULT_NAME (~$1)"
echo "üìà Application Insights: $APP_INSIGHTS_NAME (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –¥–æ 5GB)"
echo ""
echo -e "${YELLOW}‚ö†Ô∏è  –û–ë–ú–ï–ñ–ï–ù–ù–Ø –ë–Æ–î–ñ–ï–¢–ù–û–á –í–ï–†–°–Ü–á:${NC}"
echo "- F1 –ø–ª–∞–Ω: 60 —Ö–≤–∏–ª–∏–Ω CPU/–¥–µ–Ω—å, 1GB RAM"
echo "- B1ms DB: 1 vCore, 2GB RAM, 32GB storage"
echo "- –ë–µ–∑ Always On (cold start –º–æ–∂–ª–∏–≤–∏–π)"
echo "- –û–±–º–µ–∂–µ–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è"
echo "- 1 worker process"
echo ""
echo "üìÅ –°–¢–í–û–†–ï–ù–Ü –§–ê–ô–õ–ò:"
echo "  ‚úÖ requirements.txt - –º—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ"
echo "  ‚úÖ .env.budget - –±—é–¥–∂–µ—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è"
echo "  ‚úÖ startup.sh - –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π startup"
echo "  ‚úÖ budget_settings.py - –±—é–¥–∂–µ—Ç–Ω—ñ Django settings"
echo "  ‚úÖ cleanup_budget_infrastructure.sh - –≤–∏–¥–∞–ª–µ–Ω–Ω—è"
echo ""
echo "üîß –î–û–°–¢–£–ü–ò:"
echo "Database Admin User: $DB_ADMIN_USER"
echo "Database Admin Password: $DB_ADMIN_PASSWORD"
echo ""
echo "üöÄ –ù–ê–°–¢–£–ü–ù–Ü –ö–†–û–ö–ò:"
echo "1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ budget_settings.py —É –≤–∞—à–æ–º—É Django –ø—Ä–æ–µ–∫—Ç—ñ"
echo "2. –†–æ–∑–≥–æ—Ä–Ω—ñ—Ç—å –∫–æ–¥: az webapp deployment source config-zip"
echo "3. –ú–æ–Ω—ñ—Ç–æ—Ä—å—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CPU (–ª—ñ–º—ñ—Ç 60 —Ö–≤/–¥–µ–Ω—å –¥–ª—è F1)"
echo "4. –ü—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –æ–Ω–æ–≤—ñ—Ç—å –¥–æ B1 (~$13/–º—ñ—Å –¥–æ–¥–∞—Ç–∫–æ–≤–æ)"
echo ""
echo -e "${GREEN}–í–∞—à –±—é–¥–∂–µ—Ç–Ω–∏–π Django –¥–æ–¥–∞—Ç–æ–∫ –≥–æ—Ç–æ–≤–∏–π! üêçüí∞${NC}"
echo ""

# –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –±—é–¥–∂–µ—Ç–Ω–æ—ó –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
cat > budget-infrastructure-summary.txt << EOF
–ë–Æ–î–ñ–ï–¢–ù–ê AZURE INFRASTRUCTURE SUMMARY
=====================================
Created: $(date)
Project: $PROJECT_NAME (Budget Edition)
Estimated Cost: $20-25/month

Resources:
- Resource Group: $RESOURCE_GROUP_NAME
- Web App: $WEB_APP_NAME (F1 Free)
- URL: https://$APP_URL
- Database Server: $DATABASE_SERVER_NAME (B1ms)
- Database: $DATABASE_NAME
- Storage Account: $STORAGE_ACCOUNT_NAME (LRS)
- Key Vault: $KEY_VAULT_NAME
- Application Insights: $APP_INSIGHTS_NAME

Cost Breakdown:
- App Service F1: $0/month (Free tier)
- PostgreSQL B1ms: $12-15/month
- Storage LRS: $2-5/month
- Key Vault: $1/month
- App Insights: $0/month (up to 5GB)

Limitations:
- F1: 60 CPU minutes/day, 1GB RAM
- No Always On (cold starts possible)
- Limited logging
- Single worker process

Database Credentials:
- Admin User: $DB_ADMIN_USER
- Admin Password: $DB_ADMIN_PASSWORD

Files Created:
- requirements.txt (minimal)
- .env.budget
- startup.sh (optimized)
- budget_settings.py
- cleanup_budget_infrastructure.sh

Next Steps:
1. Use budget_settings.py in your Django project
2. Deploy code with ZIP deployment
3. Monitor CPU usage (60 min/day limit)
4. Upgrade to B1 if needed (+$13/month)
EOF

log "üìÑ –ë—é–¥–∂–µ—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–±–µ—Ä–µ–∂–µ–Ω–∞ —É —Ñ–∞–π–ª: budget-infrastructure-summary.txt"

```



```bash
@VitaliiShevchuk2023 ‚ûú /workspaces/portfolio-django-azure (feature/infrastructure-update) $ ./budget-azure-deploy.sh

============================================
üí∞ –ë–Æ–î–ñ–ï–¢–ù–ê AZURE INFRASTRUCTURE
============================================
–û—Ä—ñ—î–Ω—Ç–æ–≤–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: 0-25/–º—ñ—Å—è—Ü—å

üìä –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:
  üöÄ App Service: F1 (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ)
  üóÑÔ∏è  Database: Standard_B1ms (~2-15)
  üíæ Storage: Standard_LRS (~-5)
  üîê Key Vault: ~
  üìà App Insights: –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ (–¥–æ 5GB)

[2025-07-06 16:07:49] –ü–æ—á–∞—Ç–æ–∫ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ë–Æ–î–ñ–ï–¢–ù–û–á —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–ª—è Django –¥–æ–¥–∞—Ç–∫—É...
[2025-07-06 16:07:49] –ü—Ä–æ–µ–∫—Ç: django-app
[2025-07-06 16:07:49] –°–µ—Ä–µ–¥–æ–≤–∏—â–µ: budget
[2025-07-06 16:07:49] –†–µ–≥—ñ–æ–Ω: West Europe
[2025-07-06 16:07:49] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π...
[2025-07-06 16:07:49] ‚úÖ –í—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ
[INFO] üîÑ –ö–†–û–ö 1/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Resource Group
[2025-07-06 16:07:49] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Resource Group: django-app-budget-rg
{
  "id": "/subscriptions/f7dc8823-4f06-4346-9de0-badbe6273a54/resourceGroups/django-app-budget-rg",
  "location": "westeurope",
  "managedBy": null,
  "name": "django-app-budget-rg",
  "properties": {
    "provisioningState": "Succeeded"
  },
  "tags": {
    "CostProfile": "Budget",
    "CreatedBy": "AzureCLI",
    "Environment": "budget",
    "Project": "django-app"
  },
  "type": "Microsoft.Resources/resourceGroups"
}
[INFO] üîÑ –ö–†–û–ö 2/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Storage Account (–±—é–¥–∂–µ—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
[2025-07-06 16:07:51] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Storage Account: djapp1818069
{
  "accessTier": "Hot",
  "accountMigrationInProgress": null,
  "allowBlobPublicAccess": false,
  "allowCrossTenantReplication": false,
  "allowSharedKeyAccess": null,
  "allowedCopyScope": null,
  "azureFilesIdentityBasedAuthentication": null,
  "blobRestoreStatus": null,
  "creationTime": "2025-07-06T16:07:54.835755+00:00",
  "customDomain": null,
  "defaultToOAuthAuthentication": null,
  "dnsEndpointType": null,
  "enableExtendedGroups": null,
  "enableHttpsTrafficOnly": true,
  "enableNfsV3": null,
  "encryption": {
    "encryptionIdentity": null,
    "keySource": "Microsoft.Storage",
    "keyVaultProperties": null,
    "requireInfrastructureEncryption": null,
    "services": {
      "blob": {
        "enabled": true,
        "keyType": "Account",
        "lastEnabledTime": "2025-07-06T16:07:54.992005+00:00"
      },
      "file": {
        "enabled": true,
        "keyType": "Account",
        "lastEnabledTime": "2025-07-06T16:07:54.992005+00:00"
      },
      "queue": null,
      "table": null
    }
  },
  "extendedLocation": null,
  "failoverInProgress": null,
  "geoReplicationStats": null,
  "id": "/subscriptions/f7dc8823-4f06-4346-9de0-badbe6273a54/resourceGroups/django-app-budget-rg/providers/Microsoft.Storage/storageAccounts/djapp1818069",
  "identity": null,
  "immutableStorageWithVersioning": null,
  "isHnsEnabled": null,
  "isLocalUserEnabled": null,
  "isSftpEnabled": null,
  "isSkuConversionBlocked": null,
  "keyCreationTime": {
    "key1": "2025-07-06T16:07:54.976379+00:00",
    "key2": "2025-07-06T16:07:54.976379+00:00"
  },
  "keyPolicy": null,
  "kind": "StorageV2",
  "largeFileSharesState": null,
  "lastGeoFailoverTime": null,
  "location": "westeurope",
  "minimumTlsVersion": "TLS1_0",
  "name": "djapp1818069",
  "networkRuleSet": {
    "bypass": "AzureServices",
    "defaultAction": "Allow",
    "ipRules": [],
    "ipv6Rules": [],
    "resourceAccessRules": null,
    "virtualNetworkRules": []
  },
  "primaryEndpoints": {
    "blob": "https://djapp1818069.blob.core.windows.net/",
    "dfs": "https://djapp1818069.dfs.core.windows.net/",
    "file": "https://djapp1818069.file.core.windows.net/",
    "internetEndpoints": null,
    "microsoftEndpoints": null,
    "queue": "https://djapp1818069.queue.core.windows.net/",
    "table": "https://djapp1818069.table.core.windows.net/",
    "web": "https://djapp1818069.z6.web.core.windows.net/"
  },
  "primaryLocation": "westeurope",
  "privateEndpointConnections": [],
  "provisioningState": "Succeeded",
  "publicNetworkAccess": null,
  "resourceGroup": "django-app-budget-rg",
  "routingPreference": null,
  "sasPolicy": null,
  "secondaryEndpoints": null,
  "secondaryLocation": null,
  "sku": {
    "name": "Standard_LRS",
    "tier": "Standard"
  },
  "statusOfPrimary": "available",
  "statusOfSecondary": null,
  "storageAccountSkuConversionStatus": null,
  "tags": {
    "CostProfile": "Budget",
    "CreatedBy": "AzureCLI",
    "Environment": "budget",
    "Project": "django-app"
  },
  "type": "Microsoft.Storage/storageAccounts"
}
[2025-07-06 16:08:13] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
{
  "created": false
}
{
  "created": false
}
[INFO] üîÑ –ö–†–û–ö 3/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è PostgreSQL Database (–±—é–¥–∂–µ—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
[2025-07-06 16:08:16] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è PostgreSQL —Å–µ—Ä–≤–µ—Ä–∞: django-app-budget-db-1751818069
[WARNING] –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –Ω–∞–π–¥–µ—à–µ–≤—à–∏–π SKU: Standard_B1ms
The default value of '--version' will be changed to '17' from '16' in next breaking change release(2.73.0) scheduled for May 2025.
The default value of '--create-default-database' will be changed to 'Disabled' from 'Enabled' in next breaking change release(2.73.0) scheduled for May 2025.
Update default value of "--sku-name" in next breaking change release(2.73.0) scheduled for May 2025. The default value will be changed from "Standard_D2s_v3" to a supported sku based on regional capabilities.
Checking the existence of the resource group 'django-app-budget-rg'...
Resource group 'django-app-budget-rg' exists ? : True 
Incorrect value for --sku-name. The SKU name does not exist in GeneralPurpose tier. When --tier is not specified, it defaults to GeneralPurpose. Provide a valid SKU name for this tier, or specify --tier with the right tier for the SKU name chosen. Allowed values : ['standard_d96ds_v5', 'standard_d64ds_v5', 'standard_d48ds_v5', 'standard_d32ds_v5', 'standard_d16ds_v5', 'standard_d8ds_v5', 'standard_d4ds_v5', 'standard_d2ds_v5', 'standard_d64ds_v4', 'standard_d48ds_v4', 'standard_d32ds_v4', 'standard_d16ds_v4', 'standard_d8ds_v4', 'standard_d4ds_v4', 'standard_d2ds_v4', 'standard_d64s_v3', 'standard_d48s_v3', 'standard_d32s_v3', 'standard_d16s_v3', 'standard_d8s_v3', 'standard_d4s_v3', 'standard_d2s_v3']
@VitaliiShevchuk2023 ‚ûú /workspaces/portfolio-django-azure (feature/infrastructure-update) $

```

## üêõ **–ü–æ–º–∏–ª–∫–∞ –≤ PostgreSQL SKU - –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è**

–ë–∞—á—É –ø—Ä–æ–±–ª–µ–º—É! SKU `Standard_B1ms` –Ω–µ —ñ—Å–Ω—É—î –≤ GeneralPurpose tier PostgreSQL Flexible Server. –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç.

---

## üîç **–ê–Ω–∞–ª—ñ–∑ –ø–æ–º–∏–ª–∫–∏:**

### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞:**
```bash
Incorrect value for --sku-name. The SKU name does not exist in GeneralPurpose tier.
SKU: Standard_B1ms
Tier: GeneralPurpose (default)
```

### **‚úÖ –†—ñ—à–µ–Ω–Ω—è:**
–ü–æ—Ç—Ä—ñ–±–Ω–æ –∞–±–æ:
1. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Burstable tier** –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º SKU
2. **–ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ GeneralPurpose tier** –∑ –Ω–∞–π–¥–µ—à–µ–≤—à–∏–º SKU

---

## üõ†Ô∏è **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—É:**

### **–í–∞—Ä—ñ–∞–Ω—Ç 1: Burstable tier (–Ω–∞–π–¥–µ—à–µ–≤—à–∏–π ~$7-12/–º—ñ—Å—è—Ü—å)**
```bash
# –ó–∞–º—ñ–Ω–∏—Ç–∏ –≤ —Å–∫—Ä–∏–ø—Ç—ñ:
DB_SKU="Standard_B1ms"            # ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
DB_TIER="Burstable"               # ‚úÖ –î–æ–¥–∞—Ç–∏
DB_SKU="Standard_B1ms"            # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∑ tier

# –í –∫–æ–º–∞–Ω–¥—ñ az postgres flexible-server create –¥–æ–¥–∞—Ç–∏:
az postgres flexible-server create \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --name "$DATABASE_SERVER_NAME" \
    --location "$LOCATION" \
    --admin-user "$DB_ADMIN_USER" \
    --admin-password "$DB_ADMIN_PASSWORD" \
    --sku-name "$DB_SKU" \
    --tier "$DB_TIER" \                    # ‚úÖ –î–æ–¥–∞—Ç–∏ —Ü–µ–π —Ä—è–¥–æ–∫
    --storage-size "$DB_STORAGE_SIZE" \
    --version 14 \
    --public-access 0.0.0.0 \
    --tags $TAGS
```

### **–í–∞—Ä—ñ–∞–Ω—Ç 2: GeneralPurpose tier (–¥–æ—Ä–æ–∂—á–∏–π ~$85/–º—ñ—Å—è—Ü—å)**
```bash
# –ó–∞–º—ñ–Ω–∏—Ç–∏ –≤ —Å–∫—Ä–∏–ø—Ç—ñ:
DB_SKU="Standard_D2s_v3"          # ‚úÖ –ù–∞–π–¥–µ—à–µ–≤—à–∏–π —É GeneralPurpose
DB_TIER="GeneralPurpose"          # ‚úÖ –Ø–≤–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ tier
```

---

## üí∞ **–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π fix –¥–ª—è –±—é–¥–∂–µ—Ç–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó:**

### **üîß –û–Ω–æ–≤–ª–µ–Ω–∏–π budget-azure-deploy.sh:**---

## üéØ **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ PostgreSQL –¥–ª—è –±—é–¥–∂–µ—Ç—É:**

### **üí∞ –í–∞—Ä—ñ–∞–Ω—Ç 1: Burstable B1ms (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π)**
```bash
DB_SKU="Standard_B1ms"
DB_TIER="Burstable"
# –í–∞—Ä—Ç—ñ—Å—Ç—å: ~$7-12/–º—ñ—Å—è—Ü—å
# –†–µ—Å—É—Ä—Å–∏: 1 vCore, 2GB RAM, 32GB storage
# –ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è: —Ä–æ–∑—Ä–æ–±–∫–∞, —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, –º–∞–ª—ñ –ø—Ä–æ–µ–∫—Ç–∏
```

### **üíµ –í–∞—Ä—ñ–∞–Ω—Ç 2: Burstable B2s (–ö—Ä–∞—â–∏–π performance)**
```bash
DB_SKU="Standard_B2s"
DB_TIER="Burstable"
# –í–∞—Ä—Ç—ñ—Å—Ç—å: ~$14-20/–º—ñ—Å—è—Ü—å
# –†–µ—Å—É—Ä—Å–∏: 2 vCore, 4GB RAM, 32GB storage
# –ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è: –º–∞–ª—ñ production –¥–æ–¥–∞—Ç–∫–∏
```

### **üí∏ –í–∞—Ä—ñ–∞–Ω—Ç 3: GeneralPurpose D2s_v3 (–ù–∞–π–¥–æ—Ä–æ–∂—á–∏–π)**
```bash
DB_SKU="Standard_D2s_v3"
DB_TIER="GeneralPurpose"
# –í–∞—Ä—Ç—ñ—Å—Ç—å: ~$85-95/–º—ñ—Å—è—Ü—å
# –†–µ—Å—É—Ä—Å–∏: 2 vCore, 8GB RAM, high IOPS
# –ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è: production –∑ –≤–∏—Å–æ–∫–∏–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º
```

---

## üîß **–®–≤–∏–¥–∫–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**

### **üìù –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ GitHub:**

1. **–í—ñ–¥–∫—Ä–∏—Ç–∏ `budget-azure-deploy.sh`**
2. **–ó–Ω–∞–π—Ç–∏ —Ä—è–¥–∫–∏:**
   ```bash
   DB_SKU="Standard_B1ms"            # üíµ $12-15/–º—ñ—Å—è—Ü—å (1 vCore, 2GB RAM)
   ```

3. **–ó–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞:**
   ```bash
   DB_SKU="Standard_B1ms"            # üíµ $7-12/–º—ñ—Å—è—Ü—å (1 vCore, 2GB RAM)
   DB_TIER="Burstable"               # ‚úÖ –î–û–î–ê–ù–û: Burstable tier
   ```

4. **–ó–Ω–∞–π—Ç–∏ –∫–æ–º–∞–Ω–¥—É PostgreSQL:**
   ```bash
   az postgres flexible-server create \
       --sku-name "$DB_SKU" \
   ```

5. **–î–æ–¥–∞—Ç–∏ —Ä—è–¥–æ–∫ –ø—ñ—Å–ª—è `--sku-name`:**
   ```bash
   az postgres flexible-server create \
       --sku-name "$DB_SKU" \
       --tier "$DB_TIER" \           # ‚úÖ –î–û–î–ê–¢–ò –¶–ï–ô –†–Ø–î–û–ö
   ```

6. **–û–Ω–æ–≤–∏—Ç–∏ –≤–∏–≤—ñ–¥ –≤–∞—Ä—Ç–æ—Å—Ç—ñ:**
   ```bash
   echo "  üóÑÔ∏è  Database: Standard_B1ms Burstable (~$7-12)"
   echo ""
   echo "üí∞ –ó–ê–ì–ê–õ–¨–ù–ê –í–ê–†–¢–Ü–°–¢–¨: ~$10-18/–º—ñ—Å—è—Ü—å"
   ```

---

## ‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö SKU:**

### **üîç –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:**
```bash
# –ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ SKU –¥–ª—è PostgreSQL
az postgres flexible-server list-skus --location "West Europe" --output table

# –ü–æ–∫–∞–∑–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ Burstable tier
az postgres flexible-server list-skus --location "West Europe" --query "[?tier=='Burstable']" --output table
```

### **üìä –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¥–ª—è Burstable:**
```
Name              Tier       vCores    Memory    Storage
Standard_B1ms     Burstable  1         2 GB      32-16384 GB
Standard_B2s      Burstable  2         4 GB      32-16384 GB  
Standard_B4ms     Burstable  4         8 GB      32-16384 GB
```

---

## üöÄ **–ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**

### **üí∞ –û–Ω–æ–≤–ª–µ–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å:**
```
üìä –ë—é–¥–∂–µ—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞):
üöÄ App Service F1: $0/–º—ñ—Å—è—Ü—å
üóÑÔ∏è  PostgreSQL B1ms Burstable: $7-12/–º—ñ—Å—è—Ü—å  
üíæ Storage LRS: $2-5/–º—ñ—Å—è—Ü—å
üîê Key Vault: $1/–º—ñ—Å—è—Ü—å
üìà App Insights: $0/–º—ñ—Å—è—Ü—å

üí∞ –ó–ê–ì–ê–õ–¨–ù–ê –í–ê–†–¢–Ü–°–¢–¨: $10-18/–º—ñ—Å—è—Ü—å
```

### **üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–∏–π –∑–∞–ø—É—Å–∫:**
```bash
# –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—É:
chmod +x budget-azure-deploy.sh
./budget-azure-deploy.sh
```

---

## üìù **Commit message –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**

```
üêõ Fix PostgreSQL SKU configuration for budget deployment

- Fixed Standard_B1ms SKU to use Burstable tier
- Added explicit --tier parameter to PostgreSQL creation
- Updated cost estimates ($10-18/month instead of $20-25)
- Improved error handling for SKU validation

Resolves: PostgreSQL creation failure due to incorrect tier
```

---

## üí° **–î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è:**

### **üõ°Ô∏è –î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é SKU:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ SKU –ø–µ—Ä–µ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º
validate_postgresql_sku() {
    log "–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ PostgreSQL SKU..."
    
    local available_skus=$(az postgres flexible-server list-skus \
        --location "$LOCATION" \
        --query "[?tier=='$DB_TIER' && name=='$DB_SKU'].name" \
        --output tsv)
    
    if [ -z "$available_skus" ]; then
        error "SKU '$DB_SKU' –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π –≤ tier '$DB_TIER' –¥–ª—è —Ä–µ–≥—ñ–æ–Ω—É '$LOCATION'"
        log "–î–æ—Å—Ç—É–ø–Ω—ñ SKU –¥–ª—è $DB_TIER tier:"
        az postgres flexible-server list-skus \
            --location "$LOCATION" \
            --query "[?tier=='$DB_TIER'].{Name:name, vCores:vCores, Memory:memoryMb}" \
            --output table
        exit 1
    fi
    
    log "‚úÖ SKU '$DB_SKU' –¥–æ—Å—Ç—É–ø–Ω–∏–π –≤ tier '$DB_TIER'"
}

# –í–∏–∫–ª–∏–∫–∞—Ç–∏ –ø–µ—Ä–µ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º PostgreSQL
validate_postgresql_sku
```

**–í–∏–ø—Ä–∞–≤—Ç–µ SKU –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —ñ —Å–∫—Ä–∏–ø—Ç —Å–ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** üõ†Ô∏è‚úÖ


-----------------------------------------------------------------------------------------------------------------------------------------

## üêõ **–ü–æ–º–∏–ª–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É –≤ –∫–æ–º–∞–Ω–¥—ñ PostgreSQL**

–ë–∞—á—É –ø—Ä–æ–±–ª–µ–º—É! –í –∫–æ–º–∞–Ω–¥—ñ `az postgres flexible-server create` —î –ø–æ–º–∏–ª–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É - `unrecognized arguments`.

---

## üîç **–ê–Ω–∞–ª—ñ–∑ –ø–æ–º–∏–ª–∫–∏:**

### **‚ùå –ü—Ä–æ–±–ª–µ–º–∞:**
```bash
unrecognized arguments:  
```

–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤ –∫–æ–º–∞–Ω–¥—ñ —î:
- **–ó–∞–π–≤—ñ –ø—Ä–æ–±—ñ–ª–∏** –∞–±–æ —Å–∏–º–≤–æ–ª–∏
- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫** –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
- **–°–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞** –≤ bash —Å–∫—Ä–∏–ø—Ç—ñ

---

## üõ†Ô∏è **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ PostgreSQL:**---

## üîß **–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏ –ø–æ–º–∏–ª–∫–∏:**

### **1. üéØ –ü—Ä–æ–±–ª–µ–º–∞ –∑ —Ç–µ–≥–∞–º–∏:**
```bash
# ‚ùå –ü—Ä–æ–±–ª–µ–º–Ω–∞ –≤–µ—Ä—Å—ñ—è:
--tags $TAGS

# ‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è:
--tags Environment=budget Project=django-app CreatedBy=AzureCLI CostProfile=Budget
```

### **2. üéØ –ü—Ä–æ–±–ª–µ–º–∞ –∑ –ø–æ—Ä—è–¥–∫–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤:**
```bash
# ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫:
az postgres flexible-server create \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --name "$DATABASE_SERVER_NAME" \
    --location "$LOCATION" \
    --admin-user "$DB_ADMIN_USER" \
    --admin-password "$DB_ADMIN_PASSWORD" \
    --sku-name "$DB_SKU" \
    --tier "$DB_TIER" \
    --storage-size "$DB_STORAGE_SIZE" \
    --version 14 \
    --public-access 0.0.0.0 \
    --tags Environment=budget Project=django-app CreatedBy=AzureCLI
```

### **3. üéØ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–º—ñ–Ω–Ω–∏—Ö:**
```bash
# –î–æ–¥–∞—Ç–∏ debug —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø–µ—Ä–µ–¥ –∫–æ–º–∞–Ω–¥–æ—é:
echo "DEBUG: Resource Group: $RESOURCE_GROUP_NAME"
echo "DEBUG: Database Name: $DATABASE_SERVER_NAME"
echo "DEBUG: Location: $LOCATION"
echo "DEBUG: Admin User: $DB_ADMIN_USER"
echo "DEBUG: SKU: $DB_SKU"
echo "DEBUG: Tier: $DB_TIER"
echo "DEBUG: Storage: $DB_STORAGE_SIZE"
echo "DEBUG: Tags: $TAGS"
```

---

## üéØ **–®–≤–∏–¥–∫–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**

### **üìù –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç—É:**

1. **–ó–Ω–∞–π—Ç–∏ —Å–µ–∫—Ü—ñ—é —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è PostgreSQL** (–±–ª–∏–∑—å–∫–æ —Ä—è–¥–∫–∞ 180-200)

2. **–ó–∞–º—ñ–Ω–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É –Ω–∞ —Ü—é:**
```bash
az postgres flexible-server create \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --name "$DATABASE_SERVER_NAME" \
    --location "$LOCATION" \
    --admin-user "$DB_ADMIN_USER" \
    --admin-password "$DB_ADMIN_PASSWORD" \
    --sku-name "Standard_B1ms" \
    --tier "Burstable" \
    --storage-size 32 \
    --version 14 \
    --public-access 0.0.0.0 \
    --tags Environment=budget Project=django-app CreatedBy=AzureCLI CostProfile=Budget
```

3. **–ê–±–æ —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏ –¥–æ –º—ñ–Ω—ñ–º—É–º—É:**
```bash
az postgres flexible-server create \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --name "$DATABASE_SERVER_NAME" \
    --location "$LOCATION" \
    --admin-user "$DB_ADMIN_USER" \
    --admin-password "$DB_ADMIN_PASSWORD" \
    --sku-name "Standard_B1ms" \
    --tier "Burstable" \
    --storage-size 32 \
    --public-access 0.0.0.0
```

---

## üß™ **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ –æ–∫—Ä–µ–º–æ:**

### **üìã –†—É—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥–∏:**
```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–º—ñ–Ω–Ω—ñ:
RESOURCE_GROUP_NAME="django-app-budget-rg"
DATABASE_SERVER_NAME="django-app-budget-db-test"
LOCATION="West Europe"
DB_ADMIN_USER="djangoadmin"
DB_ADMIN_PASSWORD="TestPassword123!"

# –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É:
az postgres flexible-server create \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --name "$DATABASE_SERVER_NAME" \
    --location "$LOCATION" \
    --admin-user "$DB_ADMIN_USER" \
    --admin-password "$DB_ADMIN_PASSWORD" \
    --sku-name "Standard_B1ms" \
    --tier "Burstable" \
    --storage-size 32 \
    --version 14 \
    --public-access 0.0.0.0
```

---

## üí° **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è - –¥–≤–∞ –∫—Ä–æ–∫–∏:**

### **üîß –Ø–∫—â–æ –ø–∞—Ä–∞–º–µ—Ç—Ä --tier –Ω–µ –ø—Ä–∞—Ü—é—î:**

```bash
# –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
az postgres flexible-server create \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --name "$DATABASE_SERVER_NAME" \
    --location "$LOCATION" \
    --admin-user "$DB_ADMIN_USER" \
    --admin-password "$DB_ADMIN_PASSWORD" \
    --public-access 0.0.0.0

# –ö—Ä–æ–∫ 2: –û–Ω–æ–≤–∏—Ç–∏ SKU –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
az postgres flexible-server update \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --name "$DATABASE_SERVER_NAME" \
    --sku-name "Standard_B1ms" \
    --tier "Burstable"
```

---

## üîç **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤:**

### **üìã –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É:**
```bash
# –ü–æ–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:
az postgres flexible-server create --help

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ SKU:
az postgres flexible-server list-skus --location "West Europe" --output table
```

---

## üéØ **–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –¥–ª—è —Å–∫—Ä–∏–ø—Ç—É:**

### **üìù –ó–∞–º—ñ–Ω–∏—Ç–∏ —Å–µ–∫—Ü—ñ—é PostgreSQL –Ω–∞:**
```bash
info "üîÑ –ö–†–û–ö 3/11: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è PostgreSQL Database (–±—é–¥–∂–µ—Ç–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)"
log "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è PostgreSQL —Å–µ—Ä–≤–µ—Ä–∞: ${DATABASE_SERVER_NAME}"
warning "–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –Ω–∞–π–¥–µ—à–µ–≤—à–∏–π SKU: Standard_B1ms –≤ Burstable tier"

# –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –±–µ–∑ –∑–º—ñ–Ω–Ω–∏—Ö —É —Ç–µ–≥–∞—Ö
az postgres flexible-server create \
    --resource-group "$RESOURCE_GROUP_NAME" \
    --name "$DATABASE_SERVER_NAME" \
    --location "$LOCATION" \
    --admin-user "$DB_ADMIN_USER" \
    --admin-password "$DB_ADMIN_PASSWORD" \
    --sku-name "Standard_B1ms" \
    --tier "Burstable" \
    --storage-size 32 \
    --version 14 \
    --public-access 0.0.0.0 \
    --tags Environment=budget Project=django-app CreatedBy=AzureCLI CostProfile=Budget

if [ $? -eq 0 ]; then
    log "‚úÖ PostgreSQL —Å–µ—Ä–≤–µ—Ä —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ"
else
    error "‚ùå –ü–æ–º–∏–ª–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è PostgreSQL —Å–µ—Ä–≤–µ—Ä–∞"
fi
```

---

## üìù **Commit message –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:**
```
üêõ Fix PostgreSQL creation command syntax error

- Fixed command line arguments formatting
- Simplified tags parameter to avoid parsing issues
- Added error checking for PostgreSQL creation
- Confirmed Standard_B1ms SKU with Burstable tier

Resolves: "unrecognized arguments" error in PostgreSQL creation
```

**–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç –º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** üõ†Ô∏è‚úÖ

---------------------------------------------------------------------------------------------------------------------------------------------------------


## üìù **–ó–∞–ø—É—Å–∫ bash —Å–∫—Ä–∏–ø—Ç—É –∑ –∑–∞–ø–∏—Å–æ–º –≤–∏–≤–æ–¥—É —É —Ñ–∞–π–ª**

–Ñ –∫—ñ–ª—å–∫–∞ —Å–ø–æ—Å–æ–±—ñ–≤ –∑–∞–ø–∏—Å–∞—Ç–∏ –≤–∏–≤—ñ–¥ —Å–∫—Ä–∏–ø—Ç—É —É —Ñ–∞–π–ª. –û—Å—å –Ω–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏:

---

## üìã **–û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏:**

### **1. üìÑ –ü—Ä–æ—Å—Ç–∏–π –∑–∞–ø–∏—Å –≤–∏–≤–æ–¥—É (`>`)**
```bash
# –ó–∞–ø–∏—Å–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ stdout —É —Ñ–∞–π–ª (–ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏)
./budget-azure-deploy.sh > deployment.log

# –î–æ–ø–∏—Å–∞—Ç–∏ —É —Ñ–∞–π–ª (–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏)
./budget-azure-deploy.sh >> deployment.log
```

### **2. üìÑ –ó–∞–ø–∏—Å stdout + stderr (`&>`)**
```bash
# –ó–∞–ø–∏—Å–∞—Ç–∏ –í–°–ï (stdout + stderr) —É —Ñ–∞–π–ª
./budget-azure-deploy.sh &> deployment.log

# –ê–±–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:
./budget-azure-deploy.sh > deployment.log 2>&1
```

### **3. üëÄ –ó–∞–ø–∏—Å + –ø–æ–∫–∞–∑ —É –∫–æ–Ω—Å–æ–ª—ñ (`tee`)**
```bash
# –ó–∞–ø–∏—Å–∞—Ç–∏ —É —Ñ–∞–π–ª –Ü –ø–æ–∫–∞–∑–∞—Ç–∏ —É –∫–æ–Ω—Å–æ–ª—ñ –æ–¥–Ω–æ—á–∞—Å–Ω–æ
./budget-azure-deploy.sh | tee deployment.log

# –ó–∞–ø–∏—Å–∞—Ç–∏ –í–°–ï (stdout + stderr) + –ø–æ–∫–∞–∑–∞—Ç–∏ —É –∫–æ–Ω—Å–æ–ª—ñ
./budget-azure-deploy.sh 2>&1 | tee deployment.log
```

### **4. üìÖ –ó timestamp —É –Ω–∞–∑–≤—ñ —Ñ–∞–π–ª–∞**
```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª –∑ –¥–∞—Ç–æ—é/—á–∞—Å–æ–º
./budget-azure-deploy.sh 2>&1 | tee "deployment-$(date +%Y%m%d-%H%M%S).log"
```

---

## üéØ **–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–ª—è –≤–∞—à–æ–≥–æ —Å–∫—Ä–∏–ø—Ç—É:**

### **‚úÖ –ù–∞–π–∫—Ä–∞—â–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç (–∑ –ø–æ–∫–∞–∑–æ–º —É –∫–æ–Ω—Å–æ–ª—ñ):**
```bash
./budget-azure-deploy.sh 2>&1 | tee deployment.log
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚úÖ –ë–∞—á–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- ‚úÖ –ó–∞–ø–∏—Å—É—î—Ç—å—Å—è –í–°–ï (—É—Å–ø—ñ—Ö–∏ + –ø–æ–º–∏–ª–∫–∏)
- ‚úÖ –ú–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Ä–∏–≤–∞—Ç–∏ –ø—Ä–æ—Ü–µ—Å Ctrl+C
- ‚úÖ –§–∞–π–ª –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É

### **‚úÖ –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç—ñ–≤ (–±–µ–∑ –ø–æ–∫–∞–∑—É):**
```bash
./budget-azure-deploy.sh &> deployment.log
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚úÖ –®–≤–∏–¥—à–∞ —Ä–æ–±–æ—Ç–∞ (–Ω–µ–º–∞—î –≤–∏–≤–æ–¥—É —É –∫–æ–Ω—Å–æ–ª—å)
- ‚úÖ –ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è cron jobs
- ‚úÖ –ó–∞–ø–∏—Å—É—î –≤—Å–µ —É —Ñ–∞–π–ª

---

## üìä **–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏:**

### **üîß –î–ª—è –≤–∞—à–æ–≥–æ Django Azure –ø—Ä–æ–µ–∫—Ç—É:**

#### **–í–∞—Ä—ñ–∞–Ω—Ç 1: –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º**
```bash
# –ó–∞–ø—É—Å–∫ –∑ timestamps —Ç–∞ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º –≤–∏–≤–æ–¥–æ–º
./budget-azure-deploy.sh 2>&1 | tee "logs/azure-deploy-$(date +%Y%m%d-%H%M%S).log"
```

#### **–í–∞—Ä—ñ–∞–Ω—Ç 2: –¢—ñ–ª—å–∫–∏ –∑–∞–ø–∏—Å —É —Ñ–∞–π–ª**
```bash
# –¢–∏—Ö–∏–π —Ä–µ–∂–∏–º - —Ç—ñ–ª—å–∫–∏ —É —Ñ–∞–π–ª
./budget-azure-deploy.sh > deployment.log 2>&1
```

#### **–í–∞—Ä—ñ–∞–Ω—Ç 3: –û–∫—Ä–µ–º–æ —É—Å–ø—ñ—Ö–∏ —Ç–∞ –ø–æ–º–∏–ª–∫–∏**
```bash
# stdout —É –æ–¥–∏–Ω —Ñ–∞–π–ª, stderr —É —ñ–Ω—à–∏–π
./budget-azure-deploy.sh > deployment-success.log 2> deployment-errors.log
```

#### **–í–∞—Ä—ñ–∞–Ω—Ç 4: –ó progress —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º**
```bash
# –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å + –∑–∞–ø–∏—Å–∞—Ç–∏ –≤—Å–µ
./budget-azure-deploy.sh 2>&1 | tee deployment.log | grep -E "(INFO|ERROR|WARNING)"
```

---

## üìÅ **–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è –ª–æ–≥—ñ–≤:**

### **üóÇÔ∏è –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ø–∞–ø–æ–∫:**
```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É –¥–ª—è –ª–æ–≥—ñ–≤
mkdir -p logs

# –ó–∞–ø—É—Å–∫ –∑ –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–∏–º –ª–æ–≥—É–≤–∞–Ω–Ω—è–º
./budget-azure-deploy.sh 2>&1 | tee "logs/budget-deploy-$(date +%Y%m%d-%H%M%S).log"
```

### **üìÖ –†—ñ–∑–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ timestamps:**
```bash
# –§–æ—Ä–º–∞—Ç: 20250706-161830
date +%Y%m%d-%H%M%S

# –§–æ—Ä–º–∞—Ç: 2025-07-06_16-18-30
date +%Y-%m-%d_%H-%M-%S

# –§–æ—Ä–º–∞—Ç: Jul06-1618
date +%b%d-%H%M
```

---

## üé® **–î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:**

### **üîç –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –≤–∏–≤–æ–¥—É:**
```bash
# –ó–∞–ø–∏—Å–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –≤–∞–∂–ª–∏–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
./budget-azure-deploy.sh 2>&1 | tee deployment.log | grep -E "‚úÖ|‚ùå|‚ö†Ô∏è"

# –ó–∞–ø–∏—Å–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
./budget-azure-deploy.sh 2>&1 | tee deployment.log | grep -E "(ERROR|WARNING)"

# –ü–æ–∫–∞–∑–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –∫—Ä–æ–∫–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
./budget-azure-deploy.sh 2>&1 | tee deployment.log | grep -E "–ö–†–û–ö [0-9]"
```

### **üìä –ó –¥–æ–¥–∞—Ç–∫–æ–≤–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é:**
```bash
# –î–æ–¥–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Å–∏—Å—Ç–µ–º—É –Ω–∞ –ø–æ—á–∞—Ç–æ–∫ –ª–æ–≥–∞
{
    echo "=== Azure Django Deployment Log ==="
    echo "Date: $(date)"
    echo "User: $(whoami)"
    echo "PWD: $(pwd)"
    echo "Git Branch: $(git branch --show-current 2>/dev/null || echo 'N/A')"
    echo "Git Commit: $(git rev-parse --short HEAD 2>/dev/null || echo 'N/A')"
    echo "Azure Account: $(az account show --query user.name -o tsv 2>/dev/null || echo 'Not logged in')"
    echo "=================================="
    echo ""
} > deployment.log

# –ü–æ—Ç—ñ–º –¥–æ–¥–∞—Ç–∏ –≤–∏–≤—ñ–¥ —Å–∫—Ä–∏–ø—Ç—É
./budget-azure-deploy.sh 2>&1 | tee -a deployment.log
```

---

## üõ†Ô∏è **Wrapper —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ:**---

## üéØ **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è wrapper —Å–∫—Ä–∏–ø—Ç—É:**

### **üìã –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```bash
# 1. –ó–±–µ—Ä–µ–≥—Ç–∏ wrapper —è–∫ deploy-with-logs.sh
chmod +x deploy-with-logs.sh

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤–∞—à deployment –∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º
./deploy-with-logs.sh budget-azure-deploy.sh

# 3. –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥
cat logs/azure-deploy-20250706-161830.log
```

---

## üìä **–ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –ª–æ–≥—ñ–≤:**

### **üîç –ê–Ω–∞–ª—ñ–∑ –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è:**
```bash
# –ü–æ–∫–∞–∑–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –ø–æ–º–∏–ª–∫–∏
grep -i "error\|‚ùå\|failed" deployment.log

# –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å (–∫—Ä–æ–∫–∏)
grep "–ö–†–û–ö\|INFO" deployment.log

# –ü–æ–∫–∞–∑–∞—Ç–∏ –≤–∞–∂–ª–∏–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
grep -E "‚úÖ|‚ùå|‚ö†Ô∏è|üîÑ" deployment.log

# –ü–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏
grep -i "—Å—Ç–≤–æ—Ä–µ–Ω–æ\|created" deployment.log

# –ü–æ–∫–∞–∑–∞—Ç–∏ –≤–∞—Ä—Ç—ñ—Å—Ç—å
grep -i "–≤–∞—Ä—Ç—ñ—Å—Ç—å\|cost\|üí∞" deployment.log

# –ü—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫
grep -c -i "error\|‚ùå" deployment.log
```

### **üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:**
```bash
# –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–∂–Ω–æ–≥–æ –∫—Ä–æ–∫—É
grep "–ö–†–û–ö\|INFO" deployment.log | while read line; do
    echo "$line" | grep -o "\[.*\]" | tr -d "[]"
done

# –ü–æ–∫–∞–∑–∞—Ç–∏ —Ä–æ–∑–º—ñ—Ä –ª–æ–≥–∞
ls -lh deployment.log

# –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä—è–¥–∫—ñ–≤
wc -l deployment.log
```

---

## üí° **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**

### **‚úÖ –î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ (—ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ):**
```bash
./budget-azure-deploy.sh 2>&1 | tee deployment.log
```

### **‚úÖ –î–ª—è production (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ):**
```bash
./budget-azure-deploy.sh > deployment.log 2>&1
```

### **‚úÖ –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É:**
```bash
./deploy-with-logs.sh budget-azure-deploy.sh
```

### **‚úÖ –î–ª—è debugging:**
```bash
bash -x ./budget-azure-deploy.sh 2>&1 | tee debug.log
```

**–í–∏–±–∏—Ä–∞–π—Ç–µ –º–µ—Ç–æ–¥ –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –≤–∞—à–∏—Ö –ø–æ—Ç—Ä–µ–±!** üìùüöÄ
